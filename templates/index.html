<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>HENK â€” Digital Style Assistant</title>
  <meta
    name="description"
    content="HENK is a conversational style assistant. Chat via text or voice."
  />
  <link rel="stylesheet" href="static/styles.css">
</head>
<body>
  <header class="topbar" role="banner">
    <div class="brand">
      <span class="logo" aria-hidden="true">H</span>
      <div class="titles">
        <h1>HENK</h1>
        <p class="subtitle">Digital Style Assistant</p>
      </div>
    </div>
    <nav aria-label="Quick actions" class="actions">
      <button id="clearBtn" class="btn ghost" title="Clear chat">
        Clear
      </button>
      <a class="btn link" href="https://github.com/Laserhenk/Laserhenk" target="_blank" rel="noreferrer">
        GitHub
      </a>
      <button id="loginBtn" class="btn ghost" title="Login">
        Login
      </button>
      <button id="userMenuBtn" class="btn ghost" style="display:none;" title="User menu">
        <span id="userEmail"></span>
      </button>
    </nav>
  </header>

  <main id="main" class="container" role="main">
    <section id="chat" class="chat" aria-live="polite" aria-busy="false">
      <!-- Messages render here -->
      <div class="msg assistant">
        <div class="bubble">
          ðŸ’¡ <strong>Tipp:</strong> Fragen zu Preisen, Lieferzeit, Prozess oder AGB beantworte ich gerne jederzeit!
        </div>
      </div>
    </section>

    <form id="composer" class="composer" autocomplete="off" aria-label="Message composer">
      <button id="micBtn" type="button" class="btn icon" aria-pressed="false" aria-label="Start voice input" title="Voice">
        <!-- Mic icon -->
        <svg width="20" height="20" viewBox="0 0 24 24" focusable="false" aria-hidden="true">
          <path d="M12 14a3 3 0 0 0 3-3V6a3 3 0 1 0-6 0v5a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 6 6.92V21H9v2h6v-2h-2v-3.08A7 7 0 0 0 19 11h-2z"/>
        </svg>
      </button>

      <label for="message" class="sr-only">Your message</label>
      <input
        id="message"
        name="message"
        class="input"
        type="text"
        placeholder="Describe your event, preferred colors, and budgetâ€¦"
        maxlength="2000"
        required
      />

      <button id="sendBtn" type="submit" class="btn primary" title="Send">
        <!-- Send icon -->
        <svg width="18" height="18" viewBox="0 0 24 24" focusable="false" aria-hidden="true">
          <path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/>
        </svg>
        <span class="send-text">Send</span>
      </button>
    </form>

    <details class="footnote">
      <summary>Connection</summary>
      <div>
        Backend URL: <code id="backendUrlLabel"></code><br/>
        Voice input: <code id="voiceStatus">checkingâ€¦</code>
      </div>
    </details>
  </main>

  <!-- User Sidebar (visible when logged in) -->
  <aside id="userSidebar" class="user-sidebar" style="display:none;">
    <div class="sidebar-header">
      <h2>Profil</h2>
      <button id="closeSidebar" class="btn icon" title="Close">Ã—</button>
    </div>
    <div class="sidebar-content">
      <div class="user-info">
        <div class="avatar">
          <span id="userInitials"></span>
        </div>
        <p class="user-email-display" id="userEmailSidebar"></p>
      </div>

      <div class="sidebar-section">
        <h3>Meine Daten</h3>
        <div id="styleProfiles" class="data-list">
          <p class="loading">Lade Profildaten...</p>
        </div>
      </div>

      <div class="sidebar-section">
        <h3>Bestellungen</h3>
        <div id="orders" class="data-list">
          <p class="loading">Lade Bestellungen...</p>
        </div>
      </div>

      <div class="sidebar-actions">
        <a href="/portal/dashboard" class="btn ghost" style="width:100%;">
          Zum Dashboard
        </a>
        <button id="logoutBtn" class="btn ghost" style="width:100%;">
          Abmelden
        </button>
      </div>
    </div>
  </aside>

  <script src="static/app.js" defer></script>
</body>
</html>
